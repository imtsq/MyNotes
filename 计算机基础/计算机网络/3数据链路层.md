[TOC]

---

# 数据链路

链路有两种

- 1.物理链路：就是传统的线路
- 2.就是数据链路层 = 物理链路  + 协议



---

# 封装成帧， 差错控制，透明传输

## 封装成帧

### 执行流程

- 首先是网络层传输下来是IP数据包
- 在数据链路层对IP数据包分别添加首部和尾部，作为帧定界符

### MTU最大传输单元

- 为保证传输效益（比如对IP数据报添加首位过大，远大于数据，肯定是有问题的）但是数据部分又不能无线过大，就规定了MTU，MTU的大小是每种数据链路层自己规定，
- **注意**MTU是表示数据的最大值，可以说是IP数据报的最大值，但是不是数据帧的大小

## 透明传输

透明：存在的物体，看起来不存在，这里形容数据，大致是忽略数据中出现帧定界符的影响

- 主要是解决封装成帧时，当数据中出现帧定界符时，忽略帧定界符号
- 方法，在没出现一个帧定界符号时，就插入一个新的转义字符

## 差错控制



# 可靠传输

这里的可靠传输不一定是仅限于数据链路层

## 停止- 等待协议S-W

- 发送正确：发送方发送一个分组时，当接收方接收到时，接收方向发送方发送一个确认信息
- 发送信息错误：如果发送方向接收方发送一个错误分组，当接受方检查到发送的是错误数据（因为协议能检错），就向发送方发送一个误码信息，发送发接受到这个信息就重传，当再次接收到，发送方的确定信息才删除对于的缓存发送数据
- 发送超时：当发送方发送一个数据，在规定的时间（一般设计的时间是略大于一个平均往返时间）接受方没接受到，发送方就重传数据，当重发数据被接送方接受到，接收方返回一个确认数据，发送方删除已发data，然后发送next data
- 数据 - 接受消息编号问题
  - 接受信号丢失，当一定时间发送端会重新发送数据，那么当数据，再次发送到接受端时，接受端就送到了重复的消息，   可以利用编号只要1bit就就行，用0/1交替编号，当数据零发送到来，如果接受信息丢失，发送端重发0data时，因为现在来的是0data和刚才的0data都是零数据，接收端可以丢弃，并且重写返回一个0接受消息，然后发送端开始发送1消息，如此往返
  - 接受消息超时问题，0返回msg超时，发送会重写发送0data当发送端发送的0data达到接收端，0data丢弃，然后返回一个0msg，如果第一个0msg已经被接受，发送端再次接受到0msg，忽略

<img src="C:/Users/mixts/AppData/Roaming/Typora/typora-user-images/image-20250118111000605.png" alt="image-20250118111000605" style="zoom:50%;" />

一般数据链路层点对点往返时间比较固定，很少有丢失情况，所以一般不需要给信号编号

信道利用率U ， TD是数据发送时间，TA是确认消息传输时间，一般忽略TA
$$
U = \frac{T_D}{T_D +RTT + T_A }
$$
忽略TA
$$
U = \frac{T_D}{T_D +RTT }
$$


